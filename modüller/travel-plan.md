ğŸ—ºï¸ Seyahat PlanÄ± (Travel Plan) ModÃ¼lÃ¼

ğŸ¯ AmaÃ§
â€¢ KullanÄ±cÄ±larÄ±n kendi tercihlerine gÃ¶re Ã¶zelleÅŸtirilmiÅŸ seyahat planlarÄ± oluÅŸturmasÄ±nÄ± saÄŸlar.
â€¢ Sistemin temel verilere dayanarak akÄ±llÄ± Ã¶neriler sunmasÄ±nÄ± ve bu planlara uygun kampanyalarÄ± eÅŸleÅŸtirmesini saÄŸlar.
â€¢ OluÅŸturulan planlar toplulukla paylaÅŸÄ±labilir ve yapay zeka desteÄŸiyle sÃ¼rekli geliÅŸtirilebilir.

ğŸ‘¤ KullanÄ±cÄ±dan AlÄ±nan Girdiler
â€¢ BÃ¼tÃ§e Limiti (opsiyonel): minBudget, maxBudget
â€¢ KiÅŸi SayÄ±sÄ±: Seyahate katÄ±lacak toplam kiÅŸi sayÄ±sÄ±
â€¢ Ä°lgi AlanlarÄ±: Tarih, doÄŸa, mÃ¼ze, alÄ±ÅŸveriÅŸ, gece hayatÄ± vb.
â€¢ Seyahat AdÄ±mlarÄ±:
    â€¢ Ãœlke, ÅŸehir veya ilÃ§e bilgisi
    â€¢ Lokasyonda kalÄ±ÅŸ sÃ¼resi
    â€¢ UlaÅŸÄ±m tipi (opsiyonel): uÃ§ak, otobÃ¼s, tren, Ã¶zel araÃ§, karavan vb.
    â€¢ Konaklama tipi (opsiyonel): otel, hostel, Airbnb, kamp alanÄ±, karavan parkÄ± vb.
â€¢ Kampanya KatÄ±lÄ±m Bilgisi (koÅŸullu): KiÅŸi sayÄ±sÄ± > 1 ve kampanyalÄ± hizmet seÃ§ilmiÅŸse, kampanyadan kaÃ§ kiÅŸinin yararlanacaÄŸÄ± bilgisi alÄ±nÄ±r.

ğŸ§  ModÃ¼l Ä°ÅŸleyiÅŸi

1. Plan OluÅŸturma
â€¢ KullanÄ±cÄ± kiÅŸi sayÄ±sÄ± ve opsiyonel bÃ¼tÃ§e sÄ±nÄ±rlarÄ±nÄ± belirler.
â€¢ Ä°lgi alanlarÄ±nÄ± seÃ§er.
â€¢ GideceÄŸi her lokasyon iÃ§in kalÄ±ÅŸ sÃ¼resi, ulaÅŸÄ±m ve konaklama tiplerini (opsiyonel) girer.
â€¢ KampanyalÄ± hizmet seÃ§ilmiÅŸ ve grup varsa kampanya yararlanÄ±cÄ± sayÄ±sÄ± istenir.

ğŸ“Œ Ã‡ok Lokasyonlu Seyahatlerde SÄ±ralama
â€¢ Her lokasyon iÃ§in Ã¶nce ulaÅŸÄ±m ve konaklama tercihleri yapÄ±lÄ±r.
â€¢ ArdÄ±ndan gezilecek yerler ve etkinlikler Ã¶nerilir.
â€¢ Ã–rnek akÄ±ÅŸ:
    â€¢ Antalya iÃ§in ulaÅŸÄ±m & konaklama
    â€¢ MuÄŸla iÃ§in ulaÅŸÄ±m & konaklama
    â€¢ Antalya iÃ§in gezilecek yer ve etkinlikler
    â€¢ MuÄŸla iÃ§in gezilecek yer ve etkinlikler
    â€¢ Antalya iÃ§in takvim
    â€¢ MuÄŸla iÃ§in takvim
â€¢ BÃ¶ylece her lokasyon iÃ§in baÄŸlama uygun Ã¶neriler saÄŸlanÄ±r.

2. Yapay Zeka Destekli Ã–neriler
â€¢ Konaklama: KullanÄ±cÄ±nÄ±n bÃ¼tÃ§esi, kiÅŸi sayÄ±sÄ±, seyahat tarihleri, ilgi alanlarÄ± ve tercih ettiÄŸi konaklama tÃ¼rÃ¼ne gÃ¶re en uygun seÃ§enekler sunulur.
â€¢ UlaÅŸÄ±m: GidiÅŸ-dÃ¶nÃ¼ÅŸ alternatifleri; bÃ¼tÃ§e, kiÅŸi sayÄ±sÄ±, lokasyon ve tarih gÃ¶z Ã¶nÃ¼nde bulundurularak listelenir.
â€¢ Gezilecek Yerler ve Etkinlikler: Her lokasyon iÃ§in maksimum 10 Ã¶neri sunulur. KampanyalÄ± ve cashback fÄ±rsatÄ± olan mekanlar Ã¶ncelikli gÃ¶sterilir.
â€¢ KullanÄ±cÄ± EtkileÅŸimi: â€œDaha fazla gÃ¶sterâ€ butonuyla ek Ã¶neriler alÄ±nabilir.
â€¢ Filtreleme ve SÄ±ralama: PopÃ¼lerlik, kullanÄ±cÄ± deÄŸerlendirmeleri, fiyat ve kampanya durumu gibi kriterlere gÃ¶re sonuÃ§lar filtrelenip sÄ±ralanabilir.

3. Seyahat Ã–geleri SeÃ§imi, Manuel Yer Ekleme ve Aktivite Takvimi
â€¢ KullanÄ±cÄ± Ã¶nerilen seÃ§eneklerden tercih yapar.
â€¢ KullanÄ±cÄ±, sistemde kayÄ±tlÄ± olup Ã¶nerilmeyen yerleri seÃ§ip ekleyebilir.
â€¢ AyrÄ±ca, sistemde kayÄ±tlÄ± olmayan Ã¶zel yerler manuel olarak da seyahat planÄ±na dahil edilebilir.
â€¢ KullanÄ±cÄ±, Ã¶nerilen ya da kendi eklediÄŸi yerleri gÃ¼nlÃ¼k aktivite takvimine ekleyerek seyahat planÄ±nÄ± oluÅŸturur.

4. Ã–zellikler
â€¢ Place modeli Ã¼zerinden yerler arasÄ± ulaÅŸÄ±m seÃ§enekleri tek tuÅŸla Google Maps'te gÃ¶sterilir.

5. PaylaÅŸÄ±m ve YÃ¶netim
â€¢ Plan isPublic ise toplulukla paylaÅŸÄ±lÄ±r (varsayÄ±lan gizli).
â€¢ InfluencerlarÄ±n oluÅŸturduÄŸu seyahat planlarÄ± ve bu planlara yaptÄ±klarÄ± paylaÅŸÄ±mlar ana sayfada Ã¶zel olarak Ã¶ne Ã§Ä±karÄ±lÄ±r.
â€¢ KullanÄ±cÄ±lar kendi planlarÄ±nÄ± listeler, dÃ¼zenler, siler.
â€¢ KullanÄ±cÄ±lar seyahat planlarÄ±na yorum yapabilir.

model TravelPlan {
  id                 String       @id @default(cuid())
  userId             String
  user               User         @relation("UserTravelPlans", fields: [userId], references: [id])

  isPublic           Boolean      @default(false)  // Toplulukla paylaÅŸÄ±m durumu
  sharedByInfluencer Boolean      @default(false)  // Influencer tarafÄ±ndan paylaÅŸÄ±m durumu

  title              String       // Seyahat planÄ±nÄ±n baÅŸlÄ±ÄŸÄ±
  minBudget          Float?       // Minimum bÃ¼tÃ§e limiti (opsiyonel)
  maxBudget          Float?       // Maksimum bÃ¼tÃ§e limiti (opsiyonel)
  interests          Category[]   // KullanÄ±cÄ±nÄ±n ilgi alanlarÄ±

  travelSteps        Json         // Lokasyon, tarih, ulaÅŸÄ±m, sÃ¼re, maliyet ve konaklama tercihi detaylarÄ±
  appliedCampaigns   Campaign[]   @relation("AppliedCampaigns")  // Planla iliÅŸkilendirilmiÅŸ kampanyalar
  placeSelections    Json         // SeÃ§ilen gezilecek yerler (Place ID referanslarÄ±)
  eventSelections    Json         // SeÃ§ilen etkinlikler (Event ID referanslarÄ±)
  manualPlaces       Json?        // Sistem dÄ±ÅŸÄ± manuel eklenen Ã¶zel yerler (opsiyonel)
  activityCalendar   Json?        // GÃ¼nlÃ¼k aktivite takvimi (her lokasyon iÃ§in ayrÄ± olabilir)

  price              Float?       // Plan Ã¼cretliyse fiyat (TRY)
  isFree             Boolean      @default(true)   // Ãœcretsiz mi?
  soldCount          Int          @default(0)      // SatÄ±n alma sayÄ±sÄ±
  purchases          TravelPlanPurchase[] @relation("PurchasedTravelPlans")  // PlanÄ± satÄ±n alanlar

  comments           Comment[]    // Seyahat planÄ±na yapÄ±lan yorumlar

  createdAt          DateTime     @default(now())
  updatedAt          DateTime     @updatedAt
}

travelSteps: [
  {
    "country": "Ä°talya",
    "city": "Roma",
    "district": "Trastevere",
    "arrivalDate": "2025-08-01",
    "departureDate": "2025-08-04",
    "transport": "Plane",
    "travelDurationMinutes": 120,
    "travelCost": 150.0,
    "accommodationType": "Hotel"
  },
  {
    "country": "Fransa",
    "city": "Paris",
    "district": "Montmartre",
    "arrivalDate": "2025-08-04",
    "departureDate": "2025-08-09",
    "transport": "Train",
    "travelDurationMinutes": 240,
    "travelCost": 80.0,
    "accommodationType": "Hostel"
  }
]

activityCalendar: [
    {
        "2025-08-01": [
            {
            "locationId": "place123",
            "activityType": "sightseeing",   // Ã¶rn: sightseeing, dining, transport, event, manualPlace
            "title": "Antalya KaleiÃ§i Turu",
            "startTime": "09:00",
            "endTime": "12:00",
            "notes": "Rehberli tur",
            "relatedId": "place123"           // Ä°lgili Place veya Event ID'si
            },
            {
            "locationId": "place456",
            "activityType": "dining",
            "title": "Ã–ÄŸle YemeÄŸi",
            "startTime": "12:30",
            "endTime": "13:30",
            "notes": "Deniz Ã¼rÃ¼nleri restoranÄ±",
            "relatedId": "place456"
            }
        ],
        "2025-08-02": [
            {
            "locationId": "place789",
            "activityType": "event",
            "title": "Yat Festivali",
            "startTime": "14:00",
            "endTime": "18:00",
            "notes": "Yat turu ve etkinlik",
            "relatedId": "event789"
            }
        ]
    }
]

model TravelPlanPurchase {
  id             String   @id @default(cuid())

  buyerId        String
  buyer          User     @relation(fields: [buyerId], references: [id])

  travelPlanId   String
  travelPlan     TravelPlan @relation(fields: [travelPlanId], references: [id])

  pricePaid      Float
  platformFee    Float     // Ã–rneÄŸin %20'si sistem komisyonu
  creatorEarning Float     // Ã–rneÄŸin %80'i plana sahip kullanÄ±cÄ±ya kalÄ±r

  earningStatus  TravelPlanEarningStatus @default(pending) // KazanÃ§ Ã¶dendi mi? pending, paid, disputed, cancelled

  purchasedAt    DateTime @default(now())
  paidAt         DateTime?    // Ã–deme yapÄ±ldÄ±ysa
}